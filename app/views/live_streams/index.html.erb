<div class="row">
  <h3>Chat Messages</h3>
</div>
<div class="row chat-container" id="public-chat-messages">
</div>

<div class="row chat-form">
  <%= form_tag("/live_streams", method: :post, remote: true) do %>
    <%= text_area_tag :message, "" %>
    <%= submit_tag "Send" %>
  <% end %>
</div>


<%= content_for :custom_javascript do %>
  <%= javascript_tag do %>
    $(document).ready(function() {
      var source = new EventSource("/live_streams/chat_message"), message;
      source.addEventListener('Public-RoR', function (e) {
        message = JSON.parse(e.data);
        $("#public-chat-messages").append($('<p>').text(message.message));
      });
    });
  <% end %>
<% end %>
